# 변경 가능성을 최소화하라

불변 클래스란 간단히 말해 그 인스턴스의 내부 값을 수정할 수 없는 클래스다.

클래스를 불변으로 만들려면 다음 다섯 가지 규칙을 따르면 된다.

- 객체의 상태를 변경하는 메서드(변경자)를 제공하지 않는다.
- 클래스를 확장할 수 없도록 한다.
- 모든 필드를 final로 선언한다.
- 모든 필드를 private로 선언한다.
- 자신 외에는 내부의 가변 컴포넌트에 접근할 수 없도록 한다.

불변 객체는 생성된 시점의 상태를 파괴될 때까지 그대로 간직한다. 그러므로 안전하게 공유 가능하다.

그리고 근본적으로 스레드에 안전하여 따로 동기화할 필요가 없다.

불변 클래스의 단점은 값이 다르면 반드시 독립된 객체로 만들어야 한다는 것이다. 이에 따른 비용이 늘어난다.

위에서 언급한 방법 외에도 불변 클래스를 만드는 방법은 모든 생성자를 private 혹은 package-private으로 만들고 정적 팩터리를 제공하는 방법이다.



클래스는 꼭 필요한 경우가 아니라면 불변이어야 한다.

불변으로 만들 수 없는 클래스라면 변경할 수 있는 부분을 최소화 해야 한다.(되도록 모든 필드는 private final)

생성자는 불변식 설정이 모두 완료된, 초기화가 완벽히 끝난 상태의 객체를 생성해야 한다.


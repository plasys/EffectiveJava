# 생성자 대신 정적 팩터리 메서드를 고려하라

보통 클래스를 생성할 때 별 생각없이 기본생성자를 사용하거나 특정한 매개변수를 필요로 하는 public 생성자를 만들어 사용해왔다.
그런데 이 방법 외에도 클래스에서 정적 팩토리 메서드(static factory method)를 제공하여 그 클래스의 인스턴스를 반환하는 방법도 있다.

먼저 이 책에서 말하는 정적 팩토리 메서드의 장점 5개를 살펴본다.

1. 이름을 가질 수 있다.
   정적 팩토리 메서드의 이름을 통해 반환될 객체의 특성을 쉽게 묘사할 수 있다.
   생성자를 통해 객체를 생성하는 경우, 이름이 같은 생성자에 매개변수의 갯수나 순서가 다른 경우를 생각해보면 두 생성자의 차이를 알기 쉽지 않다.
   반면 차이를 잘 드러내는 이름을 지어주면 메서드의 이름만 보고도 의미와 결과를 어느정도 유추할 수 있다.

   ```java
   // 생성자
   BigInteger(int, int, Random)
   ```

   ```java
   // 정적 팩토리 메서드
   BigInteger.probablePrime
   ```
   
   후자가 메서드로부터 얻을 수 있는 객체가 무엇인지 인지하기 쉽다.
   
2. 호출될 때마다 인스턴스를 새로 생성하지는 않아도 된다.
   미리 인스턴스를 만들어 놓고 계속 그 인스턴스를 재활용 할 수 있다.
   ```java
   Boolean.valueOf(boolean)
   ```
   이 메서드는 미리 TRUE, FALSE 객체를 생성해놓고 결과에 따라 두 객체중 하나의 객체만을 반환할 뿐 새로운 객체를 만들지 않는다.

   불필요한 객체 생성을 하지 않을 수 있고, 내가 원하면 계속 새로운 객체를 생성해서 반환할 수도 있다.
   
3. 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다.
   정적 팩토리 메서드로 인터페이스나 하위 타입을 반환하게 할 수 있다.
   
   특히 인터페이스를 반환하면 얻은 객체를 다형성을 통해 인터페이스 만으로 다룰 수 있어 유연성이 좋다.

4. 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.

   입력 매개변수에 따라 분기처리하여 하위 타입의 객체를 인터페이스를 통해 반환하게 되면 클라이언트는 그 객체를 그냥 사용하기만 하면 된다.
   
5. 정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다.
 
   정적 팩토리 메서드에서 인터페이스를 반환하게 하면, 작성 시점에서 구현 클래스가 존재하지 않아도 상관이 없으며

   구현 클래스를 새로 추가하더라도 인터페이스로 반환하기 때문에 팩토리 메서드의 코드는 수정할 필요가 없다.


정적 팩토리 메서드의 단점 2가지도 살펴본다.

1. 상속을 하려면 public이나 protected 생성자가 필요하니 정적 팩터리 메서드만 제공하면 하위 클래스를 만들 수 없다.
 
   정적 팩토리 메서드에서는 생성자의 접근제어자를 private로 설정하기 때문에 상속이 불가능함.

2. 정적 팩터리 메서드는 프로그래머가 찾기 어렵다.
 
   API 문서를 봐야 클래스를 인스턴스화 할 방법을 알 수 있음.
   
   이를 보완하기 위해 정적 팩토리 메서드에서 흔히 사용하는 메서드 명명 방식이 있음.
   
   from : 하나의 매개변수로부터 해당 타입(같은 클래스)의 인스턴스 반환
   
   of : 여러 매개변수를 받아 적합한 타입의 인스턴스를 반환
   
   valueOf : from과 of의 더 자세한 버전(?) ex) Integer.valueOf
   
   instance 혹은 getInstance : 인스턴스를 반환하나 같은 인스턴스임을 보장하지는 않음
   
   create 혹은 newInstance : 매번 새로운 인스턴스를 반환
   
   getType : getInstance와 같으나, 본 클래스와 다른 Type의 클래스를 생성해서 반환(같은 인스턴스임을 보장x)
   
   newType : newInstance와 같으나, 본 클래스와 다른 Type의 클래스를 새로 생성해서 반환
   
   type : getType과 newType의 간결한 버전
